# ãƒ¡ãƒ¢ã‚µã‚¤ãƒˆå®Ÿè£…ãƒ—ãƒ©ãƒ³ï¼ˆPhaseåˆ¥è©³ç´°ï¼‰

## æ¦‚è¦

2é¢æ§‹æˆãƒ¡ãƒ¢ã‚«ãƒ¼ãƒ‰ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ®µéšçš„ã«å®Ÿè£…ã™ã‚‹ãƒ—ãƒ©ãƒ³ã€‚å„Phaseã¯ç‹¬ç«‹ã—ã¦å‹•ä½œã™ã‚‹å®Œæˆå“ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã€å­¦ç¿’åŠ¹æœã‚’æœ€å¤§åŒ–ã—ãªãŒã‚‰ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã§ãã‚‹æ§‹æˆã€‚

## Phase 1: åŸºç›¤æ§‹ç¯‰ã¨ã‚³ã‚¢UIï¼ˆ1-2é€±é–“ï¼‰

### 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚³ãƒãƒ³ãƒ‰
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
npm create vite@latest memo-app --template react-ts
cd memo-app

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install @reduxjs/toolkit react-redux react-router-dom
npm install -D tailwindcss postcss autoprefixer
npm install uuid @types/uuid

# Tailwind CSSåˆæœŸåŒ–
npx tailwindcss init -p
```

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 
```
src/
â”œâ”€â”€ components/          # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ui/             # å†åˆ©ç”¨å¯èƒ½ãªUIãƒ‘ãƒ¼ãƒ„
â”‚   â”œâ”€â”€ memo/           # ãƒ¡ãƒ¢é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ layout/         # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ store/              # ReduxçŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ slices/         # Redux slices
â”‚   â””â”€â”€ index.ts        # storeè¨­å®š
â”œâ”€â”€ types/              # TypeScriptå‹å®šç¾©
â”œâ”€â”€ utils/              # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”œâ”€â”€ hooks/              # ã‚«ã‚¹ã‚¿ãƒ hooks
â””â”€â”€ styles/             # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
```

### 1.2 ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨Reduxè¨­å®š

#### å‹å®šç¾© (types/memo.ts)
```typescript
export interface Memo {
  id: string;
  frontContent: string;
  backContent: string;
  createdAt: Date;
  updatedAt: Date;
  tags?: string[];
  color?: string;
  isStarred?: boolean;
}

export interface MemoState {
  items: Memo[];
  totalCount: number;
  currentPage: number;
  itemsPerPage: number;
  isLoading: boolean;
  error: string | null;
}

export interface UIState {
  selectedMemoId: string | null;
  isEditMode: boolean;
  searchQuery: string;
  sortBy: 'createdAt' | 'updatedAt' | 'alphabetical';
  sortOrder: 'asc' | 'desc';
}
```

#### Redux Storeè¨­å®š (store/index.ts)
```typescript
import { configureStore } from '@reduxjs/toolkit';
import memoReducer from './slices/memoSlice';
import uiReducer from './slices/uiSlice';

export const store = configureStore({
  reducer: {
    memos: memoReducer,
    ui: uiReducer,
  },
});

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
```

#### ãƒ¡ãƒ¢ã‚¹ãƒ©ã‚¤ã‚¹ (store/slices/memoSlice.ts)
```typescript
import { createSlice, PayloadAction } from '@reduxjs/toolkit';
import { Memo, MemoState } from '../../types/memo';

const initialState: MemoState = {
  items: [],
  totalCount: 0,
  currentPage: 1,
  itemsPerPage: 12,
  isLoading: false,
  error: null,
};

const memoSlice = createSlice({
  name: 'memos',
  initialState,
  reducers: {
    addMemo: (state, action: PayloadAction<Memo>) => {
      state.items.unshift(action.payload);
      state.totalCount += 1;
    },
    updateMemo: (state, action: PayloadAction<Memo>) => {
      const index = state.items.findIndex(memo => memo.id === action.payload.id);
      if (index !== -1) {
        state.items[index] = action.payload;
      }
    },
    deleteMemo: (state, action: PayloadAction<string>) => {
      state.items = state.items.filter(memo => memo.id !== action.payload);
      state.totalCount -= 1;
    },
    setMemos: (state, action: PayloadAction<Memo[]>) => {
      state.items = action.payload;
      state.totalCount = action.payload.length;
    },
  },
});

export const { addMemo, updateMemo, deleteMemo, setMemos } = memoSlice.actions;
export default memoSlice.reducer;
```

### 1.3 åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### Header ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (components/layout/Header.tsx)
```typescript
import React from 'react';

interface HeaderProps {
  onCreateMemo: () => void;
}

const Header: React.FC<HeaderProps> = ({ onCreateMemo }) => {
  return (
    <header className="bg-white shadow-sm border-b">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          <h1 className="text-2xl font-bold text-gray-900">
            ğŸ“ ãƒ¡ãƒ¢ã‚¢ãƒ—ãƒª
          </h1>
          <button
            onClick={onCreateMemo}
            className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"
          >
            + æ–°ã—ã„ãƒ¡ãƒ¢
          </button>
        </div>
      </div>
    </header>
  );
};

export default Header;
```

#### MemoCard ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (components/memo/MemoCard.tsx)
```typescript
import React, { useState } from 'react';
import { Memo } from '../../types/memo';

interface MemoCardProps {
  memo: Memo;
  onEdit: (memo: Memo) => void;
  onDelete: (id: string) => void;
}

const MemoCard: React.FC<MemoCardProps> = ({ memo, onEdit, onDelete }) => {
  const [isFlipped, setIsFlipped] = useState(false);

  const handleCardClick = () => {
    setIsFlipped(!isFlipped);
  };

  const handleEditClick = (e: React.MouseEvent) => {
    e.stopPropagation();
    onEdit(memo);
  };

  const handleDeleteClick = (e: React.MouseEvent) => {
    e.stopPropagation();
    if (window.confirm('ã“ã®ãƒ¡ãƒ¢ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
      onDelete(memo.id);
    }
  };

  return (
    <div className="memo-card-container perspective-1000 h-48 cursor-pointer">
      <div
        className={`memo-card relative w-full h-full transform-style-preserve-3d transition-transform duration-600 ${
          isFlipped ? 'rotate-y-180' : ''
        }`}
        onClick={handleCardClick}
      >
        {/* è¡¨é¢ */}
        <div className="card-face absolute w-full h-full backface-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg p-4 flex flex-col justify-between text-white">
          <div className="font-semibold text-lg">
            {memo.frontContent || 'ã‚¯ãƒªãƒƒã‚¯ã—ã¦å†…å®¹ã‚’è¿½åŠ '}
          </div>
          <div className="flex justify-between opacity-75">
            <button
              onClick={handleEditClick}
              className="text-sm hover:bg-white/20 px-2 py-1 rounded"
            >
              ç·¨é›†
            </button>
            <button
              onClick={handleDeleteClick}
              className="text-sm hover:bg-white/20 px-2 py-1 rounded"
            >
              å‰Šé™¤
            </button>
          </div>
        </div>

        {/* è£é¢ */}
        <div className="card-face absolute w-full h-full backface-hidden rotate-y-180 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg p-4 flex flex-col justify-between text-white">
          <div className="text-sm">
            {memo.backContent || 'è£é¢ã®å†…å®¹ã‚’è¿½åŠ '}
          </div>
          <div className="flex justify-between opacity-75">
            <button
              onClick={handleEditClick}
              className="text-sm hover:bg-white/20 px-2 py-1 rounded"
            >
              ç·¨é›†
            </button>
            <button
              onClick={handleDeleteClick}
              className="text-sm hover:bg-white/20 px-2 py-1 rounded"
            >
              å‰Šé™¤
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default MemoCard;
```

#### MemoGrid ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (components/memo/MemoGrid.tsx)
```typescript
import React from 'react';
import { useSelector } from 'react-redux';
import { RootState } from '../../store';
import MemoCard from './MemoCard';
import { Memo } from '../../types/memo';

interface MemoGridProps {
  onEditMemo: (memo: Memo) => void;
  onDeleteMemo: (id: string) => void;
}

const MemoGrid: React.FC<MemoGridProps> = ({ onEditMemo, onDeleteMemo }) => {
  const memos = useSelector((state: RootState) => state.memos.items);

  return (
    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6">
      {memos.map((memo) => (
        <MemoCard
          key={memo.id}
          memo={memo}
          onEdit={onEditMemo}
          onDelete={onDeleteMemo}
        />
      ))}
    </div>
  );
};

export default MemoGrid;
```

### 1.4 CRUDæ“ä½œå®Ÿè£…

#### MemoForm ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (components/memo/MemoForm.tsx)
```typescript
import React, { useState, useEffect } from 'react';
import { Memo } from '../../types/memo';

interface MemoFormProps {
  memo?: Memo;
  isOpen: boolean;
  onClose: () => void;
  onSave: (frontContent: string, backContent: string) => void;
}

const MemoForm: React.FC<MemoFormProps> = ({ memo, isOpen, onClose, onSave }) => {
  const [frontContent, setFrontContent] = useState('');
  const [backContent, setBackContent] = useState('');

  useEffect(() => {
    if (memo) {
      setFrontContent(memo.frontContent);
      setBackContent(memo.backContent);
    } else {
      setFrontContent('');
      setBackContent('');
    }
  }, [memo]);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (frontContent.trim() || backContent.trim()) {
      onSave(frontContent, backContent);
      onClose();
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
      <div className="bg-white rounded-lg p-6 w-full max-w-md mx-4">
        <h2 className="text-xl font-bold mb-4">
          {memo ? 'ãƒ¡ãƒ¢ã‚’ç·¨é›†' : 'æ–°ã—ã„ãƒ¡ãƒ¢'}
        </h2>
        
        <form onSubmit={handleSubmit}>
          <div className="mb-4">
            <label className="block text-sm font-medium text-gray-700 mb-2">
              è¡¨é¢ã®å†…å®¹
            </label>
            <textarea
              value={frontContent}
              onChange={(e) => setFrontContent(e.target.value)}
              className="w-full p-3 border border-gray-300 rounded-md resize-none"
              rows={3}
              placeholder="è¡¨é¢ã®å†…å®¹ã‚’å…¥åŠ›..."
            />
          </div>
          
          <div className="mb-6">
            <label className="block text-sm font-medium text-gray-700 mb-2">
              è£é¢ã®å†…å®¹
            </label>
            <textarea
              value={backContent}
              onChange={(e) => setBackContent(e.target.value)}
              className="w-full p-3 border border-gray-300 rounded-md resize-none"
              rows={3}
              placeholder="è£é¢ã®å†…å®¹ã‚’å…¥åŠ›..."
            />
          </div>
          
          <div className="flex justify-end space-x-3">
            <button
              type="button"
              onClick={onClose}
              className="px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300"
            >
              ã‚­ãƒ£ãƒ³ã‚»ãƒ«
            </button>
            <button
              type="submit"
              className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
            >
              ä¿å­˜
            </button>
          </div>
        </form>
      </div>
    </div>
  );
};

export default MemoForm;
```

### 1.5 ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸çµ±åˆ

#### LocalStorage Manager (utils/localStorage.ts)
```typescript
import { Memo } from '../types/memo';

const STORAGE_KEY = 'memo-app-data';

export class LocalStorageManager {
  static save(memos: Memo[]): void {
    try {
      const data = {
        memos,
        lastUpdated: new Date().toISOString(),
      };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    } catch (error) {
      console.error('Failed to save to localStorage:', error);
    }
  }

  static load(): Memo[] {
    try {
      const data = localStorage.getItem(STORAGE_KEY);
      if (!data) return [];
      
      const parsed = JSON.parse(data);
      return parsed.memos || [];
    } catch (error) {
      console.error('Failed to load from localStorage:', error);
      return [];
    }
  }

  static clear(): void {
    localStorage.removeItem(STORAGE_KEY);
  }
}
```

#### Redux Middleware (store/middleware/localStorage.ts)
```typescript
import { Middleware } from '@reduxjs/toolkit';
import { LocalStorageManager } from '../../utils/localStorage';

export const localStorageMiddleware: Middleware = (store) => (next) => (action) => {
  const result = next(action);
  
  // ãƒ¡ãƒ¢é–¢é€£ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å ´åˆã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
  if (action.type.startsWith('memos/')) {
    const state = store.getState();
    LocalStorageManager.save(state.memos.items);
  }
  
  return result;
};
```

### 1.6 ãƒ¡ã‚¤ãƒ³Appçµ±åˆ

#### App.tsx
```typescript
import React, { useState, useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { v4 as uuidv4 } from 'uuid';
import Header from './components/layout/Header';
import MemoGrid from './components/memo/MemoGrid';
import MemoForm from './components/memo/MemoForm';
import { addMemo, updateMemo, deleteMemo, setMemos } from './store/slices/memoSlice';
import { LocalStorageManager } from './utils/localStorage';
import { Memo } from './types/memo';
import { RootState } from './store';

function App() {
  const dispatch = useDispatch();
  const [isFormOpen, setIsFormOpen] = useState(false);
  const [editingMemo, setEditingMemo] = useState<Memo | undefined>();

  // åˆæœŸãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰
  useEffect(() => {
    const savedMemos = LocalStorageManager.load();
    dispatch(setMemos(savedMemos));
  }, [dispatch]);

  const handleCreateMemo = () => {
    setEditingMemo(undefined);
    setIsFormOpen(true);
  };

  const handleEditMemo = (memo: Memo) => {
    setEditingMemo(memo);
    setIsFormOpen(true);
  };

  const handleSaveMemo = (frontContent: string, backContent: string) => {
    if (editingMemo) {
      // ç·¨é›†
      const updatedMemo: Memo = {
        ...editingMemo,
        frontContent,
        backContent,
        updatedAt: new Date(),
      };
      dispatch(updateMemo(updatedMemo));
    } else {
      // æ–°è¦ä½œæˆ
      const newMemo: Memo = {
        id: uuidv4(),
        frontContent,
        backContent,
        createdAt: new Date(),
        updatedAt: new Date(),
      };
      dispatch(addMemo(newMemo));
    }
  };

  const handleDeleteMemo = (id: string) => {
    dispatch(deleteMemo(id));
  };

  return (
    <div className="min-h-screen bg-gray-50">
      <Header onCreateMemo={handleCreateMemo} />
      <main>
        <MemoGrid
          onEditMemo={handleEditMemo}
          onDeleteMemo={handleDeleteMemo}
        />
      </main>
      <MemoForm
        memo={editingMemo}
        isOpen={isFormOpen}
        onClose={() => setIsFormOpen(false)}
        onSave={handleSaveMemo}
      />
    </div>
  );
}

export default App;
```

## Tailwind CSSè¨­å®š

#### tailwind.config.js
```javascript
module.exports = {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      perspective: {
        '1000': '1000px',
      },
      transformStyle: {
        'preserve-3d': 'preserve-3d',
      },
      backfaceVisibility: {
        'hidden': 'hidden',
      },
      rotate: {
        'y-180': 'rotateY(180deg)',
      },
    },
  },
  plugins: [],
}
```

## Phase 1 å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–å®Œäº†
- [ ] TypeScriptå‹å®šç¾©ä½œæˆ
- [ ] Redux storeè¨­å®š
- [ ] åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] CRUDæ“ä½œå®Ÿè£…
- [ ] ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸çµ±åˆ
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ
- [ ] åŸºæœ¬ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

## æ¬¡ã®Phaseäºˆå‘Š

**Phase 2** ã§ã¯ä»¥ä¸‹ã‚’å®Ÿè£…äºˆå®šï¼š
- ã‚«ãƒ¼ãƒ‰ãƒ•ãƒªãƒƒãƒ—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- é«˜åº¦ãªã‚½ãƒ¼ãƒˆæ©Ÿèƒ½

---

**æ›´æ–°æ—¥**: 2025-01-11  
**å¯¾è±¡**: Phase 1 å®Ÿè£…è©³ç´°  
**æ¨å®šå·¥æ•°**: 1-2é€±é–“