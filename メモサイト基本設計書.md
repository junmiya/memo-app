# メモサイト 基本設計書（2 面構成メモカード） - 簡易版

## 1. システム概要

### 1.1 サービス概要

2 面構成（表裏）のメモカードを無制限に作成できる Web アプリ。カードをクリックまたはタッチで裏返し、内容を切り替える。多数メモはページ分割表示。

### 1.2 主な機能

- メモカード（表・裏）
- フリップアニメーション
- 無制限メモ作成・保存
- ページネーション
- 永続化（localStorage / Firebase）

### 1.3 システム構成

```
React/Vue.js ─ 状態管理(Redux/Pinia)
    ├─ CSS アニメーション（カード反転）
    ├─ Data Manager（CRUD）
    └─ ストレージ：localStorage / Firebase
```

## 2. データ構造

### 2.1 Memo エンティティ

```ts
interface Memo {
  id: string;
  frontContent: string;
  backContent: string;
  createdAt: Date;
  updatedAt: Date;
  tags?: string[];
  color?: string;
  isStarred?: boolean;
}
```

### 2.2 アプリケーション状態

```ts
interface AppState {
  memos: {
    items: Memo[];
    totalCount: number;
    currentPage: number;
    itemsPerPage: number;
    isLoading: boolean;
    error: string | null;
  };
  ui: {
    selectedMemoId: string | null;
    isEditMode: boolean;
    searchQuery: string;
    sortBy: "createdAt" | "updatedAt" | "alphabetical";
    sortOrder: "asc" | "desc";
  };
  settings: {
    storageType: "localStorage" | "firebase" | "api";
    itemsPerPage: number;
    theme: "light" | "dark";
  };
}
```

## 3. UI 構成とカード構造

### 3.1 メモカード構造

```html
<div class="memo-card-container">
  <div class="memo-card" [class.flipped]="isFlipped" @click="toggleFlip">
    <div class="card-face front">{{ frontContent }}</div>
    <div class="card-face back">{{ backContent }}</div>
  </div>
</div>
```

### 3.2 CSS アニメーション

```css
.memo-card-container {
  perspective: 1000px;
}

.memo-card {
  transform-style: preserve-3d;
  transition: transform 0.6s ease;
}

.memo-card.flipped {
  transform: rotateY(180deg);
}

.card-face {
  backface-visibility: hidden;
  position: absolute;
}

.back {
  transform: rotateY(180deg);
}
```

## 4. ページネーションロジック

```ts
class PaginationManager {
  static getPageItems<T>(items: T[], page: number, perPage: number): T[] {
    const start = (page - 1) * perPage;
    return items.slice(start, start + perPage);
  }
}
```

## 5. ストレージ

### 5.1 LocalStorage Manager

```ts
class LocalStorageManager {
  save(memos: Memo[]) {
    localStorage.setItem("memo-app", JSON.stringify(memos));
  }

  load(): Memo[] {
    return JSON.parse(localStorage.getItem("memo-app") || "[]");
  }
}
```

### 5.2 Firebase Manager

```ts
class FirebaseManager {
  async saveMemo(memo: Memo) {
    const ref = doc(db, "memos", memo.id);
    await setDoc(ref, memo);
  }

  async loadMemos(userId: string): Promise<Memo[]> {
    const q = query(collection(db, "memos"), where("userId", "==", userId));
    const docs = await getDocs(q);
    return docs.docs.map((d) => ({ id: d.id, ...d.data() } as Memo));
  }
}
```

## 6. 実装ステップ（簡略版）

- Phase 1: UI 構築（カード、CRUD）
- Phase 2: ページネーション、検索・タグ
- Phase 3: Firebase 連携、仮想スクロール対応

---

**更新日**: 2025-07-11  
**作成者**: ChatGPT + ユーザー協働  
**用途**: 機能仕様書（簡易版）
