# 🚀 かるたカード - Vercelデプロイ手順書

## 📋 概要

React + TypeScript + Redux Toolkit で作られた英検4級英単語学習アプリ「かるたカード」のVercelへのデプロイ手順書です。

## 🎯 プロジェクト情報

- **プロジェクト名**: かるたカード (flipcards-eiken4)
- **リポジトリ**: https://github.com/junmiya/memo-app
- **技術スタック**: React 18, TypeScript, Vite, Redux Toolkit, Tailwind CSS
- **デプロイURL**: https://flipcards-eiken4.vercel.app

## 📦 事前準備

### 必要なファイル
- ✅ `vercel.json` - SPA ルーティング設定
- ✅ `.gitignore` - Git除外設定
- ✅ `package.json` - 依存関係とビルドスクリプト
- ✅ `.env.example` - 環境変数テンプレート

### 設定確認
```json
// vercel.json
{
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

```json
// package.json (重要部分)
{
  "scripts": {
    "build": "tsc && vite build",
    "preview": "vite preview"
  }
}
```

## 🔧 デプロイ手順

### Step 1: GitHub準備

#### 1.1 リポジトリ作成
```bash
# GitHub CLIでリポジトリ作成
gh repo create memo-app --public --description "React + TypeScript + Redux Toolkit 2面構成メモカードアプリ" --clone=false
```

#### 1.2 Git初期化・コミット
```bash
# Git初期化
git init
git config user.email "your-email@example.com"
git config user.name "Your Name"

# 初回コミット
git add .
git commit -m "Initial commit: React memo app with Phase 2 search and filter features"

# リモート追加・プッシュ
git remote add origin https://github.com/junmiya/memo-app.git
git branch -M main
git push -u origin main
```

### Step 2: Vercelデプロイ

#### 2.1 Vercelアカウント
1. https://vercel.com にアクセス
2. "Continue with GitHub"でログイン
3. GitHub認証を完了

#### 2.2 プロジェクト作成
1. **"Add New Project"**をクリック
2. **"junmiya/memo-app"**リポジトリを選択
3. **"Import"**をクリック

#### 2.3 設定確認
Vercelが自動検出する設定：
- **Framework Preset**: Vite
- **Build Command**: `npm run build`
- **Output Directory**: `dist`
- **Install Command**: `npm install`

#### 2.4 デプロイ実行
1. **"Deploy"**ボタンをクリック
2. ビルド・デプロイが自動実行される
3. 完了時にURLが生成される

### Step 3: プロジェクト名変更

#### 3.1 名前変更手順
1. Vercel Dashboard → プロジェクト選択
2. **Settings** → **General**
3. **Project Name**を変更：`memo-app` → `flipcards-eiken4`
4. **Save**をクリック
5. 新URL: `https://flipcards-eiken4.vercel.app`

#### 3.2 警告対応
- OpenID Connect警告が表示される
- フロントエンドのみのアプリには影響なし
- **Continue**で問題なく変更可能

## 🔄 継続的デプロイ

### 自動デプロイ設定
Vercel + GitHub連携により以下が自動実行：

```bash
# コード変更・プッシュ
git add .
git commit -m "Update feature"
git push origin main

# → Vercelが自動的に：
# 1. 新しいコミットを検知
# 2. npm install実行
# 3. npm run build実行
# 4. dist/をデプロイ
# 5. 本番環境更新
```

### プレビューデプロイ
- **Pull Request作成時**: プレビューURL自動生成
- **ブランチプッシュ時**: ブランチ別プレビュー環境
- **本番反映前**: 安全な動作確認が可能

## ⚙️ 環境設定

### 環境変数設定（必要時）
1. **Settings** → **Environment Variables**
2. 本番用環境変数を設定：
   - `VITE_APP_NAME=かるたカード`
   - `VITE_APP_VERSION=1.0.0`

### カスタムドメイン設定（オプション）
1. **Settings** → **Domains**
2. **Add Domain**をクリック
3. 独自ドメインを設定（例：`eiken4-cards.com`）

## 🧪 動作確認

### ビルドテスト
```bash
# ローカルでビルド確認
npm run build

# プレビュー確認
npm run preview
```

### 本番確認項目
- ✅ アプリが正常に表示される
- ✅ 英検4級単語カード50枚が表示される
- ✅ カードフリップアニメーション動作
- ✅ 検索・フィルター機能動作
- ✅ レスポンシブデザイン確認
- ✅ LocalStorage永続化動作

## 🚨 トラブルシューティング

### よくある問題と解決方法

#### ビルドエラー
```bash
# TypeScriptエラー
npm run build
# → エラー箇所を修正してリトライ
```

#### ルーティングエラー
- **症状**: ページリロードで404エラー
- **原因**: SPAルーティング設定不備
- **解決**: `vercel.json`の設定確認

#### 環境変数エラー
- **症状**: 本番で環境変数が読み込まれない
- **解決**: Vercel Dashboard で環境変数設定

#### デプロイ失敗
- **確認事項**: 
  - package.json のビルドスクリプト
  - 依存関係の整合性
  - GitHubリポジトリのアクセス権限

## 📊 パフォーマンス最適化

### Lighthouse スコア目標
- **Performance**: 90+
- **Accessibility**: 95+
- **Best Practices**: 90+
- **SEO**: 85+

### 最適化ポイント
- Viteによる高速ビルド
- Tree-shakingによるバンドルサイズ最適化
- Tailwind CSSのPurge設定
- 画像最適化（必要時）

## 📝 デプロイ履歴

### 主要なデプロイ
1. **初回デプロイ** (2025-01-11)
   - 基本機能実装完了
   - URL: `https://memo-app-nu-five.vercel.app`

2. **英検4級データ追加** (2025-01-11)
   - 50個の英単語サンプルデータ追加
   - カテゴリ別カラーコーディング

3. **UI改善デプロイ** (2025-01-11)
   - カード文字サイズ最適化（4xl/3xl）
   - 中央配置レイアウト

4. **リブランディング** (2025-01-11)
   - サイト名変更：メモアプリ → かるたカード
   - プロジェクト名変更：flipcards-eiken4
   - URL: `https://flipcards-eiken4.vercel.app`

## 🔗 関連リンク

- **本番サイト**: https://flipcards-eiken4.vercel.app
- **GitHubリポジトリ**: https://github.com/junmiya/memo-app
- **Vercel Dashboard**: https://vercel.com/dashboard
- **設計書**: メモサイト基本設計書.md

---

**作成日**: 2025-01-11  
**更新日**: 2025-01-11  
**作成者**: Claude Code Assistant  
**対象**: 英検4級英単語学習アプリ「かるたカード」